(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(211)}])},211:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var a=n(5893),s=n(7294),r=n(5152),i=n.n(r),l={src:"/_next/static/media/lightbulb.c61c0d7a.png",height:21,width:21,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA70lEQVR42mN4+eItIwMY2FlXV0+Or6icEM/AoGgEEunpWcjEAALxiY0hJ09e/H/79oP/t27e/3/k8Jn/CqqptgwwMHP6qpX37z35f/vWw593bj/8ce/u4/8TJi6awAADs2auXvrm9fv/W7cc+H3s2Pnfr1+/+9/TO7+HAQaMzbKDQMa/evX279u3H/5fuXLrPwODqx0DCNy4+pAZRBcV9i04fPjc/717T/4PDa/uAolNnbqChaGudjoLiJOf392+bduR/xs37f8fGVuTAxJLz2plYfAPKgOb4OJZ4JOb230oM7Njt51LrilILDCkggkAS890FL+3WsIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},o={src:"/_next/static/media/compare.2c5d4bcf.png",height:25,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxUlEQVR42mNAA5LB4ZUGDOigvHxCyuLFm5b19S087BtYGhMcXqEfFFZhCJMXPXTozO//QPD4yfP/GoapLiDBkIhKy8CwciUQW+L8+WvvgPJ/n794BVLgBBIMjajUCgyrUASxpS5evP4JqODP69dv/6vqpTiAFUSCFaiA2Pzbtx968/Hj5//Xrt/5b2yV6VVTN5kV6FhHoAJpBhDQ1E03LSruT8jIausNCCmPAjpQLQhkPAgkxLcwInmIIzisQgbGCQwrZwIAzsJU1XFWaLkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},c={src:"/_next/static/media/download.21ca44fc.png",height:21,width:21,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAclBMVEVSVnhSVndRVnhRVndRVXcAAABRVnhRVndSVnhRVnhRVndSVnhRVndRVndRVXhSVnhRVnhRVnhRVndRVndRVndRVndRVnhRVnhRVnhRVndSVnhRVndRVndRVndRVnhRVndRVndRVnhRVndRVndRVndSVnjVRfL+AAAAJnRSTlMAAAAAAAABAQICAgMEBQYTFxweHyUmKi84PEBCQ0RLTE5RUVeLpUvAbnUAAABFSURBVHjaFcZXFkAwAATAtYtI9N4797+iZ74Gge8ZBwSgUTUr4p/2lCXkWO6KCcv+uAbfIFT2vDUtlDbr3eWEkmkZt4IfWf8DJLHlxz8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},A={src:"/_next/static/media/location.4c1b55e7.png",height:21,width:21,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42mNgYIhlYoAAYW+f0jR948wIIJsNIqTPyAAFMsuXb73z+tXb/48ePf8/ddry3UAxJgYYaG2d1fLp05f/t289+PHu3Yffjx4++y8pnRrKAAPTp6/o/fz5y/8VK7b9Onv28u/nz1//d3UpSWRAAibnzl79//fvv7+/f/3+v2nTvkdAMT6I7mkrWRiAwMgku/wV0A3Xrt35D+Q6MwBBUnIzSE4E7tJp01Yc7+9fPIMBCPbsOs7MgARgijiBmBVZDADtJ1XAI1GuuQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},d={src:"/_next/static/media/zoom.dd01cbdd.png",height:21,width:21,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAjklEQVR42mMAgcCwCpbAsPIwII4HYncGJABTUACUcAkMLRcG0jFAfgxEvJwJJGkCxEFALA7EbUFhFaxAOgsoKQzTbQUU9AYKKADp2UCaDYijgFgCoiC0nBHIqYKYVM4DpIOBuA2qmRlqSjk/kJMGpPOAOACIk4HYHibJCKSwOTwFiA1gHEYgZobSLEiKhAHRfzxbSHjG/wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},h={src:"/_next/static/media/right_arrow.c8716a74.png",height:21,width:21,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAY1BMVEVSVnhRVnhRVncAAABRVndRVnhRVndRVnhRVnhSVnhRVnhSVnhRVndRVndRVndRVnhRVnhRVnhRVnhRVndRVndRVnhRVnhRVndRVnhRVnhRVnhRVnhSVnhRVndRVnhRVndRVnhynYx6AAAAIXRSTlMAAAAAAQICAwQJCwwMDhMVFxwnNT0+QElQVFVlZmx8m7e0ytY1AAAAP0lEQVR42gVAhRHAIBBLAuXrLlDff0oOjixEI7yVumYaRLJ6B6GL6Tzuf0S7bvsSvx6S2Dw1oWBKkwyO8kJgBlwWAowlnESCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},u=n(5675),m=n.n(u),b=function(e){let{icon:t,size:n=20}=e;return(0,a.jsx)("div",{className:"flex relative",children:(0,a.jsx)(m(),{src:{lightbulb:l,compare:o,download:c,location:A,zoom:d,rightArrow:h}[t],alt:"lightbulb",width:n,height:n})})},x=n(3514),p=n.n(x),g=function(e){let{onClick:t,children:n,classes:s,disabled:r=!1}=e;return(0,a.jsx)("div",{className:p().buttonWrapper,children:(0,a.jsx)("button",{...t?{type:"button"}:{type:"submit"},...t&&{onClick:t},className:[p().button,s].join(" "),disabled:r,children:n})})},f=function(e){let{onClick:t,icon:n,disabled:s=!1}=e;return(0,a.jsx)(g,{onClick:t,classes:p().buttonIcon,disabled:s,children:(0,a.jsx)(b,{icon:n})})};let V={lightbulb:"lightbulb",compare:"compare",download:"download",location:"location",zoom:"zoom",rightArrow:"rightArrow"};var R=function(e){let{onClick:t,icon:n,text:s,disabled:r=!1}=e;return(0,a.jsxs)(g,{onClick:t,classes:p().buttonIconText,disabled:r,children:[(0,a.jsx)(b,{icon:n}),(0,a.jsx)("div",{children:s})]})},w=n(1440),j=n.n(w),v=()=>{let[e,t]=(0,s.useState)(0);return{setTabActiveIndex:t,isActiveTab:t=>t===e}},C=function(e){let{tabs:t,setActiveTab:n}=e,{setTabActiveIndex:r,isActiveTab:i}=v(),l=e=>{r(e),n(t[e])};return(0,s.useEffect)(()=>{n(t[0])},[]),(0,a.jsx)("ul",{className:j().tabsWrapper,children:t.map((e,t)=>(0,a.jsx)("li",{className:"\n						".concat(i(t)?j().tabActive:j().tabNotActive),onClick:()=>l(t),children:e.label},e.name))})},k=e=>{let t=new Date(e),n=t.toLocaleString("en-US",{timeZone:"UTC",day:"numeric",month:"short"});return n};let y={customerFeedback:[{label:"NPS Pre",name:"npsPre"},{label:"NPS Post",name:"npsPost"},{label:"NPS Delta",name:"npsDelta"}]},_={chart:{id:null,toolbar:{show:!1},zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},xaxis:{type:null,categories:[],convertedCatToNumeric:!1,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,showDuplicates:!1,trim:!1,minHeight:void 0,maxHeight:120,style:{colors:"var(--chartLabels)",fontSize:"12px",fontWeight:400},offsetX:0,format:"dd/MM",formatter:function(e,t,n){return k(e).split(" ")},offsetY:0},tickPlacement:"on"},yaxis:{labels:{style:{colors:"var(--chartLabels)",fontSize:"12px",fontWeight:400},offsetY:2,offsetX:-5},axisTicks:{show:!0,borderType:"solid",width:13,offsetX:9,offsetY:-1.6}},grid:{show:!0,borderColor:"var(--mediumGrey)",strokeDashArray:0,position:"back",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}},padding:{top:0,right:0,bottom:0,left:15}},legend:{show:!1}};var N=n(7284),S=n.n(N);function I(e){let{name:t,onChange:n=()=>{},labelText:r,defaultChecked:i,checkmarkColor:l}=e,[o,c]=(0,s.useState)(i);return(0,a.jsx)("div",{className:"flex flex-col w-full ",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:S().container,children:[(0,a.jsx)("input",{type:"checkbox",name:t,onChange:e=>{n(e),c(!o)},checked:i}),(0,a.jsx)("span",{className:[l,S().checkmark].join(" "),style:{background:"".concat(o?l?[l]:"black":"")}}),(0,a.jsx)("span",{children:r})]})})})}var E=function(e){let{activeTab:t,compareWithChange:n}=e;return(0,a.jsxs)("div",{className:"flex gap-3 w-full justify-between text-sm px-3 lg:flex-row flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 lg:w-1/12",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded-md"}),(0,a.jsx)("span",{children:t.label})]}),(0,a.jsxs)("div",{className:"flex w-11/12 gap-4 md:flex-row flex-col items-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-start gap-2 ",children:[(0,a.jsx)(b,{icon:V.compare,size:24}),(0,a.jsx)("span",{children:"Compare with:"})]}),(0,a.jsxs)("div",{className:"flex gap-2 md:flex-row flex-wrap",children:[(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 border border-mediumGrey rounded-md p-2 h-10",children:(0,a.jsx)(I,{labelText:"Year over year",name:"yearOverYear",onChange:n})}),(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 border border-mediumGrey rounded-md p-2 h-10",children:(0,a.jsx)(I,{labelText:"Month over month",checkmarkColor:"var(--fucsia)",name:"monthOverMonth",onChange:n})}),(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 border border-mediumGrey rounded-md p-2 h-10",children:(0,a.jsx)(I,{labelText:"Response rate",checkmarkColor:"var(--green)",name:"responseRate",onChange:n})}),(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 border bg-lightGrey border-mediumGrey rounded-md p-2 h-10",children:(0,a.jsx)(I,{labelText:"NPS Post",name:"npsPost",onChange:n})}),(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 border bg-lightGrey border-mediumGrey rounded-md p-2 h-10",children:(0,a.jsx)(I,{labelText:"NPS Delta",name:"npsDelta",onChange:n})})]})]})]})},U=function(e){let{compareWithChange:t,exportToCSV:n}=e,[r,i]=(0,s.useState)({});return(0,a.jsxs)("div",{className:"flex flex-col w-full px-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex md:justify-between md:flex-row flex-col justify-center gap-2 items-center",children:[(0,a.jsx)("h3",{className:"font-medium text-2xl",children:"Customer Feedback"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f,{icon:V.lightbulb}),(0,a.jsx)(f,{icon:V.zoom}),(0,a.jsx)(f,{icon:V.compare}),(0,a.jsx)(f,{icon:V.download,onClick:n}),(0,a.jsx)(f,{icon:V.location}),(0,a.jsx)(R,{icon:V.rightArrow,text:"View more"})]})]}),(0,a.jsx)(C,{tabs:y.customerFeedback,setActiveTab:i}),(0,a.jsx)(E,{activeTab:r,compareWithChange:t})]})},D=n(6154),T=n(2433),B=()=>{let{setLoading:e}=(0,T.Z6)(),t=async t=>{let{url:n}=t;try{e(!0);let{data:{data:t}}=await D.Z.get(n);return e(!1),t}catch(t){e(!1),console.log(t)}};return{getChartData:t}},L=e=>{let{getChartData:t,url:n}=e,[a,r]=(0,s.useState)(null),[i,l]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{let e=await t({url:n});l(e)},[t,n]);return(0,s.useEffect)(()=>{o()},[]),(0,s.useEffect)(()=>{i&&(_.chart.id=i.id,_.xaxis.type=i.data_type,_.xaxis.categories=i.chart_data.nps_score_timeline.points.map(e=>Object.keys(e)[0]),r({options:_,series:[{name:i.chart_data.nps_score_timeline.name,type:"line",data:i.chart_data.nps_score_timeline.points.map(e=>e[Object.keys(e)[0]]?e[Object.keys(e)[0]]:0)}]}))},[i]),{data:a,chartData:i}},P=e=>{let{url:t}=e,{getChartData:n}=B(),{data:a,chartData:r}=L({getChartData:n,url:t}),[i,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(a);(0,s.useEffect)(()=>{c(a)},[a]);let A=(0,s.useCallback)(e=>{let{compareWithChange:t}=e,n={...o};return(null==t?void 0:t.target.name)==="responseRate"&&((null==t?void 0:t.target.checked)?n.series=[...n.series,{name:r.chart_data.nps_response_timeline.name,type:"area",data:r.chart_data.nps_response_timeline.points.map(e=>e[Object.keys(e)[0]]?e[Object.keys(e)[0]]:0)}]:n.series=n.series.filter(e=>{let{name:t}=e;return t!==r.chart_data.nps_response_timeline.name})),c(n)},[o,r]);return(0,s.useEffect)(()=>{A({compareWithChange:i})},[i]),{setCompareWithChange:l,chartDataToDisplay:o}};let Y=i()(()=>Promise.all([n.e(279),n.e(229)]).then(n.bind(n,7229)),{loadableGenerated:{webpack:()=>[7229]},ssr:!1});var O=function(){let{setCompareWithChange:e,chartDataToDisplay:t}=P({url:"https://run.mocky.io/v3/b48be7cc-2082-479d-8ff7-83c003537f83"});return(0,a.jsxs)("div",{className:"lg:w-[1150px] items-center self-center m-auto p-5 bg-white shadow-md rounded-md flex flex-col",children:[(0,a.jsx)(U,{compareWithChange:e,exportToCSV:()=>{window.Apex._chartInstances[0].chart.ctx.exports.exportToCSV({series:t.series,columnDelimiter:","})}}),t&&(0,a.jsx)(Y,{options:t.options,series:t.series,type:"line",className:"w-full"})]})},M=n(9008),G=n.n(M);function J(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(G(),{children:[(0,a.jsx)("title",{children:"Chart Display"}),(0,a.jsx)("meta",{name:"description",content:"Simply display of a chart using Apex Charts and NextJs"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"})]})," ",(0,a.jsx)(O,{})]})}},3514:function(e){e.exports={buttonWrapper:"Button_buttonWrapper__a5Nq7",button:"Button_button__Mhggu",buttonIcon:"Button_buttonIcon__nuggc",buttonIconText:"Button_buttonIconText__kGpYr"}},7284:function(e){e.exports={container:"Checkbox_container__NI6Dy",checkmark:"Checkbox_checkmark__I5cVm"}},1440:function(e){e.exports={tabsWrapper:"Tabs_tabsWrapper__K4CMt",tab:"Tabs_tab__HeYbT",tabNotActive:"Tabs_tabNotActive__T1s5Y",tabActive:"Tabs_tabActive__Ny34I"}}},function(e){e.O(0,[95,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);